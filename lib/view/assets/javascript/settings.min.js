jQuery(document).ready(function($){'use strict';$('#ai1wm-save-gdrive-key').on('click',function(e){e.preventDefault();var button=$(this);var apiKey=$('#ai1wm-gdrive-api-key').val().trim();var messageContainer=$('#ai1wm-gdrive-messages');button.prop('disabled',true);messageContainer.html('');$.ajax({type:'POST',url:ajaxurl,data:{action:'ai1wm_save_gdrive_key',api_key:apiKey,ai1wm_nonce:'ai1wm_gdrive_settings'},dataType:'json',success:function(response){if(response.success){messageContainer.html('<div class="ai1wm-message ai1wm-success-message">'+'<p>'+response.data.message+'</p>'+'</div>');}else{messageContainer.html('<div class="ai1wm-message ai1wm-error-message">'+'<p>'+response.data.message+'</p>'+'</div>');}},error:function(xhr,status,error){messageContainer.html('<div class="ai1wm-message ai1wm-error-message">'+'<p>Error: '+error+'</p>'+'</div>');},complete:function(){button.prop('disabled',false);}});});$('#ai1wm-test-gdrive-key').on('click',function(e){e.preventDefault();var button=$(this);var apiKey=$('#ai1wm-gdrive-api-key').val().trim();var messageContainer=$('#ai1wm-gdrive-messages');button.prop('disabled',true);messageContainer.html('');if(!apiKey){messageContainer.html('<div class="ai1wm-message ai1wm-error-message">'+'<p>Please enter an API key first.</p>'+'</div>');button.prop('disabled',false);return;}messageContainer.html('<div class="ai1wm-message ai1wm-info-message">'+'<p>Testing API key...</p>'+'</div>');$.ajax({type:'POST',url:ajaxurl,data:{action:'ai1wm_validate_gdrive_key',api_key:apiKey,ai1wm_nonce:'ai1wm_gdrive_settings'},dataType:'json',success:function(response){if(response.success){messageContainer.html('<div class="ai1wm-message ai1wm-success-message">'+'<p>'+response.data.message+'</p>'+'</div>');}else{messageContainer.html('<div class="ai1wm-message ai1wm-error-message">'+'<p>'+response.data.message+'</p>'+'</div>');}},error:function(xhr,status,error){messageContainer.html('<div class="ai1wm-message ai1wm-error-message">'+'<p>Error: '+error+'</p>'+'</div>');},complete:function(){button.prop('disabled',false);}});});});
